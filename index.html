
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Paulo Diogo</title>
	<meta name="author" content="Paulo Diogo Rodrigues Leão de Almeida">

	
	<meta name="description" content="[Redux] Derived Data Reducer: const emprestimo = ( state = { numeroMeses: new BigNumber(36), taxa: new BigNumber(1.82), valorPrestacao: new &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Paulo Diogo" type="application/atom+xml">
	
	<link rel="canonical" href="http://blog.paulodiogo.com/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-59720734-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("paulodiogodm@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>

<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="http://br.linkedin.com/pub/paulo-diogo-rodrigues-le%C3%A3o-de-almeida/23/59a/105">About</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul>

<section class="aboutme">
  <p>
    Blogando coisas.
  </p>
</section>
</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:paulodiogodm@gmail.com" title="Email">Email</a>
		
		
		
			<a class="google" href="https://plus.google.com/paulodiogodm" rel="author" title="Google+">Google+</a>
		
		
			<a class="twitter" href="http://twitter.com/paulodiogo" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/paulodiogo" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2019-11-06T13:50:30-03:00" data-updated="true" itemprop="datePublished"></time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2019/11/06/redux-derived-data/" itemprop="url">[Redux] Derived Data</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Reducer:</p>

<pre><code class="javascript ">const emprestimo = (
  state = {
    numeroMeses: new BigNumber(36),
    taxa: new BigNumber(1.82),
    valorPrestacao: new BigNumber(304),
    valorFinanciado: new BigNumber(10000)
  },
  action
) =&gt; {
  switch (action.type) {
    case "NUMERO_MESES":
      return { ...state, numeroMeses: action.numeroMeses };
    case "TAXA":
      return { ...state, taxa: action.taxa };
    case "VALOR_PRESTACAO":
      return { ...state, valorPrestacao: action.valorPrestacao };
    case "VALOR_FINANCIADO":
      return { ...state, valorFinanciado: action.valorFinanciado };
    default:
      return state;
  }
};
</code></pre>

<p>How to calculate the result values?</p>

<p>Create a selector, using reselect!</p>

<pre><code class="javascript">
const valores = state =&gt; state;

const derivados = createSelector(valores, state =&gt; {
  ///calculate the total...

  return {
    total: total
  };
});
</code></pre>

<p>With the <code>selector</code> we need to conect with the <code>reducers</code>:</p>

<pre><code class="javascript">
const mapStateToProps = state =&gt; {
  return {
    derivados: derivados(state)
  };
};

connect(mapStateToProps)(CalculoPrestacao);
</code></pre>

<p>To use, just do the normal things:</p>

<pre><code class="javascript">const {    
    derivados
} = state;

&lt;CalculoPrestacao derivados={derivados} /&gt;

&lt;Resultado derivados={this.props.derivados} /&gt;
</code></pre>

<pre><code class="javascript">const { createSelector } = Reselect;
const { connect } = ReactRedux;
</code></pre>

<p><a href="https://redux.js.org/recipes/computing-derived-data">Documentação</a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2019-11-06T13:50:14-03:00" data-updated="true" itemprop="datePublished"></time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2019/11/06/vue/" itemprop="url">Vue, Vuetify and v-model.lazy</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>In <a href="https://vuejs.org">Vue.js</a> you can use <a href="https://br.vuejs.org/v2/api/#v-model">v-model</a> to bind values in your form. That is, when you <a href="https://javascript.info/events-change-input#event-input">type</a> the value is changed on the state (input event). When you whant to wait the user get out of the control, you can use the <a href="https://vuejs.org/v2/guide/forms.html#Modifiers">modifier</a> <a href="https://vuejs.org/v2/guide/forms.html#lazy">.lazy</a>, then the event <strong><a href="https://javascript.info/events-change-input#event-change">change</a></strong> will be used instead.</p>

<p><a href="https://github.com/vuejs/vue/issues/5743">But the world is cruel</a> and when you use a custom component like <a href="https://vuetifyjs.com">Vuetifyjs</a> you need to use a <a href="https://github.com/vuetifyjs/vuetify/issues/1810">different approach</a>. You need to use <code>:value</code> and <code>@change</code> manually.</p>

<p>Example:
~~~
    <v-text-field  label="Price"
      :value="price"
      @change="value => price = value&#8221;>    <br/>
    </v-text-field>
~~~</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2019-11-06T13:50:00-03:00" data-updated="true" itemprop="datePublished"></time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2019/11/06/vue-masked-input/" itemprop="url">Vue Masked Input</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>There are many excelent <a href="https://github.com/vuejs/awesome-vue#masked-input">components</a> to get a <a href="https://en.wikipedia.org/wiki/Input_mask">masked input</a> when you are using vuejs. But, I could not find one that fill all my requisites.</p>

<p>I have use the following aproach:</p>

<p>I used the <a href="https://github.com/the-darc/string-mask">string-mask</a> component to format the values;
Write the <code>get</code> and <code>set</code> for the value of the input; and
Write one method to verify if the value typed is an number.</p>

<p>GET:</p>

<pre><code class="javascript">
    get() {
        const valuePrice = state.price;
        const formatter = new StringMask(state.maskinput, {
            reverse: true
        });
        let result = "";
        if (valuePrice !== "" &amp;&amp; valuePrice != null) {
            result = formatter.apply(valuePrice.toString().replace(/[^0-9]/g, ""));
        }
        return result;
    }
</code></pre>

<p>SET:</p>

<pre><code class="javascript">set(value) {
    const formatter = new StringMask(state.mascara, {
        reverse: true
    });

    const normalized = value.replace(/[^0-9]/g, "");

    let result = "";

    if (normalized !== "" &amp;&amp; normalized !== null) {
        result = formatter.apply(normalized);
    }

    if (result === "0" || result === "0,00") {
        result = null;
    }

    state.price = result;
}
</code></pre>

<p>Verify if is number:</p>

<pre><code class="javascript">
methods: {
    isNumber: function (evt) {
        evt = (evt) ? evt : window.event;
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if ((charCode &gt; 31 &amp;&amp; (charCode &lt; 48 || charCode &gt; 57)) &amp;&amp; charCode !== 46) {
            evt.preventDefault();;
        } else {
            return true;
        }
    }
},
</code></pre>

<p>To use:</p>

<pre><code class="javascript">
@keypress="isNumber($event)"
:value="valor" @input="value =&gt; valor = value"
</code></pre>

<p>We can add a default value, in my case, I cannot allow a zero value.</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2019-11-06T13:43:55-03:00" data-updated="true" itemprop="datePublished"></time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2019/11/06/vue-slots-number-1/" itemprop="url">Vue Slots #1</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>When you want to create a component that has dynamic child, that&rsquo;s a case to use the <a href="https://vuejs.org/v2/guide/components-slots.html"><code>&lt;slot&gt;</code></a> There are many other cases, but this one is beautiful.</p>

<p>I needed that the title of a <a href="https://getbootstrap.com/docs/4.3/components/card/#header-and-footer">card</a> had a dynamic text based on a certain condition, like: if the application has a context, show the label of the context.</p>

<pre><code>Vue.component("personal-title-card", {
    template: `
    &lt;div&gt;
        &lt;div class="float-left"&gt;
            &lt;slot&gt;&lt;/slot&gt;
        &lt;/div&gt;                      
        &lt;div class="float-right"&gt;
            &lt;strong&gt;&lt;/strong&gt;
        &lt;/div&gt;
    &lt;/div&gt;`,
    computed: {
        ...mapGetters(["contextLabel"])
    }
});
</code></pre>

<p>To use is as simple as that:</p>

<p><code>&lt;personal-title-card&gt;Accumsan massa elementum.&lt;/personal-title-card&gt;</code></p>

<p>According to the <a href="https://br.vuejs.org/v2/guide/components-slots.html">documentation</a>:</p>

<blockquote><p>A <code>&lt;slot&gt;</code> outlet without name implicitly has the name “default”.</p></blockquote>

<p>You can name a <a href="https://vuejs.org/v2/guide/components-slots.html#Named-Slots"><code>&lt;slot&gt;</code></a> like:</p>

<pre><code>Vue.component("personal-title-card-2", {
    template: `
    &lt;div&gt;
        &lt;div class="float-left"&gt;
            &lt;slot name="text"&gt;&lt;/slot&gt;
        &lt;/div&gt;                      
        &lt;div class="float-right"&gt;
            &lt;strong&gt;&lt;/strong&gt;
        &lt;/div&gt;
    &lt;/div&gt;`,
    computed: {
        ...mapGetters(["contextLabel"])
    }
});
</code></pre>

<p>Again, to use is as simple as that:</p>

<pre><code>&lt;personal-title-card&gt;
  &lt;template v-slot:text&gt;
    Accumsan massa elementum.
  &lt;/template&gt;
&lt;/personal-title-card&gt;
</code></pre>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2019-11-06T13:35:26-03:00" data-updated="true" itemprop="datePublished"></time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2019/11/06/vue-components-with-internal-data/" itemprop="url">Vue Components With Internal Data</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>When you write <a href="https://br.vuejs.org/v2/guide/components.html">components</a> in vue you sometimes need some internal data in each component, to handle internal behavior.</p>

<p>Like when I had a problem with formating numeric texts.</p>

<p>The component was rendered correctly, but, the first time the user entered the input the format was lost.</p>

<p>I realized that the <a href="https://br.vuejs.org/v2/guide/components-edge-cases.html#Acessando-Instancias-de-Componentes-e-Elementos-Filhos"><code>$refs</code></a> was undefined and the format function was called again only when the user typed a value and the event <code>input</code> was fired.</p>

<p>So I added a internal data that was changed when the component was <a href="https://vuejs.org/v2/guide/instance.html#Lifecycle-Diagram">mounted</a> and this behavior disappeared.</p>

<p>First add the data in the component:</p>

<pre><code>data: function () {
    return { mounted: false }
},
</code></pre>

<p>And changed the value in <code>mounted</code> method:</p>

<pre><code>mounted() {      
    this.mounted = true;
},
</code></pre>

<p>And changed my <code>computed</code> value to check the value of the data:</p>

<pre><code> computed: {
        awesomeValue: {
            get: function () {


                //HERE I CHECK THE VALUE
                if (!this.mounted) {
                    return;
                }

                //... DO THINGS TO GET VALUE

                return valor;
            },
            set: function (value) {

                //... DO THINGS TO SET VALUE

            }
        },
</code></pre>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2015-04-07T22:55:17-03:00" data-updated="true" itemprop="datePublished"></time></div>
		<div class="tags">

</div>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2015/04/07/o-ataque-do-deus-asp-mvc-componentizando-entranhas-e-espolio/" itemprop="url">O Ataque Do Deus ASP MVC: Componentizando Entranhas E Espólio</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>O ASP MVC é realmente um Deus hoje em dia. É venerado por todos os desenvolvedores .NET e muitos de outros mundos.
Sem muitas delongas, qual o objetivo, componentizar com ASP MVC. Para muitos deve ser trivial, mas nunca tinha feito isso. Já havia feito sistemas em ASP MVC, mas não um componente. Com dezenas de possíveis clientes.
Aí está uma coisa que a Microsoft faz bem (#FanBoyDetected), componentizar e deixar a nossa vida mais tranquila, não mais fácil.</p>

<p>É muito fácil reusar em ASP MVC. No meu caso, criei uma ‘class library’ e adicionei as referências que eu iria usar (via nuget).</p>

<p>No caso de páginas, scripts, css etc, segue o rito de sempre, criar o que se quer e marcar ele como &lsquo;Embedded Resources&rsquo;.</p>

<p>Quando for criar as &lsquo;Views&rsquo;, pode ser criado no mesmo esquema das aplicações padrão:</p>

<p>$(Project)/Views/Controller/Pagina.wtv</p>

<p>Inclusive pode ser criado um arquivo Web.config na pasta &lsquo;Views&rsquo; para configurações.</p>

<p>Quanto aos outros tipos de recursos:</p>

<p>Eu estou usando o &lsquo;EmbeddedResourceVirtualPathProvider&rsquo; feito pelo @mcintyre321. Ele carrega os arquivos que estiverem em &lsquo;Embedded Resources&rsquo;.</p>

<p>Install-Package EmbeddedResourceVirtualPathProvider</p>

<p>Vai ser adicionado um arquivo &lsquo;App_Start\RegisterVirtualPathProvider.cs&rsquo;, que deve ser executado no start da aplicação, no  &lsquo;Global.asax&rsquo;.</p>

<p>Enfim, era isso aí.</p>

<p>PS. Post em construção, vou fazer um projeto de teste.</p>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2019

    Paulo Diogo Rodrigues Leão de Almeida


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
		</div>
	</div>
	

<script type="text/javascript">
      var disqus_shortname = 'paulodiogo';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
